# AI-CloudOps AI Module - æ™ºèƒ½è¿ç»´æ ¹å› åˆ†æä¸è‡ªåŠ¨ä¿®å¤ç³»ç»Ÿ

[![Python Version](https://img.shields.io/badge/python-3.11+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Docker](https://img.shields.io/badge/docker-enabled-blue.svg)](Dockerfile)

## ğŸ“– é¡¹ç›®ç®€ä»‹

AI-CloudOps AI æ¨¡å—æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„æ™ºèƒ½è¿ç»´ç³»ç»Ÿï¼Œä¸“æ³¨äº Kubernetes ç¯å¢ƒçš„æ ¹å› åˆ†æå’Œè‡ªåŠ¨åŒ–ä¿®å¤ã€‚ç³»ç»Ÿé›†æˆäº†å¤šç§ AI æŠ€æœ¯ï¼ŒåŒ…æ‹¬å¼‚å¸¸æ£€æµ‹ã€ç›¸å…³æ€§åˆ†æã€å¤§è¯­è¨€æ¨¡å‹å’Œå¤š Agent åä½œï¼Œä¸ºè¿ç»´å›¢é˜Ÿæä¾›æ™ºèƒ½åŒ–çš„é—®é¢˜è¯Šæ–­å’Œè§£å†³æ–¹æ¡ˆã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ” æ™ºèƒ½æ ¹å› åˆ†æ

- **å¤šç»´åº¦å¼‚å¸¸æ£€æµ‹**: åŸºäº Z-Scoreã€IQRã€å­¤ç«‹æ£®æ—ã€DBSCAN ç­‰å¤šç§ç®—æ³•
- **ç›¸å…³æ€§åˆ†æ**: å‘ç°æŒ‡æ ‡é—´çš„å…³è”å…³ç³»ï¼Œè¯†åˆ«æ½œåœ¨çš„å› æœé“¾
- **æ—¶é—´åºåˆ—åˆ†æ**: æ”¯æŒæ—¶é—´çª—å£åˆ†æå’Œè¶‹åŠ¿æ£€æµ‹
- **AI æ™ºèƒ½æ€»ç»“**: åŸºäº LLM ç”Ÿæˆäººç±»å¯è¯»çš„åˆ†ææŠ¥å‘Š

### ğŸ¤– å¤š Agent è‡ªåŠ¨ä¿®å¤

- **Supervisor Agent**: åè°ƒæ•´ä½“ä¿®å¤æµç¨‹
- **K8s Fixer Agent**: ä¸“é—¨å¤„ç† Kubernetes é—®é¢˜
- **Researcher Agent**: æœç´¢è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ
- **Coder Agent**: æ‰§è¡Œæ•°æ®åˆ†æå’Œè®¡ç®—ä»»åŠ¡
- **Notifier Agent**: å‘é€é€šçŸ¥å’Œå‘Šè­¦

### ğŸ“Š è´Ÿè½½é¢„æµ‹

- **åŸºäºæœºå™¨å­¦ä¹ çš„é¢„æµ‹æ¨¡å‹**: é¢„æµ‹æœªæ¥å®ä¾‹éœ€æ±‚
- **æ—¶é—´ç‰¹å¾å·¥ç¨‹**: è€ƒè™‘æ—¶é—´å‘¨æœŸæ€§å’Œä¸šåŠ¡æ¨¡å¼
- **ç½®ä¿¡åº¦è¯„ä¼°**: æä¾›é¢„æµ‹ç»“æœçš„å¯ä¿¡åº¦

### ğŸ”” æ™ºèƒ½é€šçŸ¥

- **é£ä¹¦é›†æˆ**: æ”¯æŒå¯Œæ–‡æœ¬å¡ç‰‡æ¶ˆæ¯
- **åˆ†çº§å‘Šè­¦**: æ ¹æ®ä¸¥é‡ç¨‹åº¦å‘é€ä¸åŒçº§åˆ«çš„é€šçŸ¥
- **äººå·¥å¹²é¢„**: è‡ªåŠ¨è¯†åˆ«éœ€è¦äººå·¥ä»‹å…¥çš„åœºæ™¯

## ğŸ— ç³»ç»Ÿæ¶æ„

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Gateway â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Health API â”‚ Predict API â”‚ RCA API â”‚ AutoFix API â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Core Business Logic â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ RCA â”‚ â”‚ Prediction â”‚ â”‚ Multi-Agent â”‚ â”‚
â”‚ â”‚ Engine â”‚ â”‚ Service â”‚ â”‚ System â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Service Layer â”‚
â”‚ Prometheus â”‚ Kubernetes â”‚ LLM â”‚ Notification â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Infrastructure â”‚
â”‚ Prometheus â”‚ Grafana â”‚ Ollama â”‚ Redis â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- Docker & Docker Compose
- Kubernetes é›†ç¾¤ï¼ˆå¯é€‰ï¼‰
- è‡³å°‘ 4GB RAM

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd aiops-platform
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®ç›¸å…³å‚æ•°
```

### 3. ä½¿ç”¨ Docker Compose å¯åŠ¨

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f aiops-platform
```

### 4. éªŒè¯æœåŠ¡

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/v1/health

# æŸ¥çœ‹APIæ–‡æ¡£
curl http://localhost:8080/
```

## ğŸ“‹ API æ–‡æ¡£

### å¥åº·æ£€æŸ¥

```bash
GET /api/v1/health
```

### è´Ÿè½½é¢„æµ‹

```bash
# è·å–å½“å‰é¢„æµ‹
GET /api/v1/predict

# è‡ªå®šä¹‰é¢„æµ‹
POST /api/v1/predict
{
  "current_qps": 100.5,
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### æ ¹å› åˆ†æ

```bash
POST /api/v1/rca
{
  "start_time": "2024-01-01T10:00:00Z",
  "end_time": "2024-01-01T11:00:00Z",
  "metrics": ["container_cpu_usage_seconds_total"]
}
```

### è‡ªåŠ¨ä¿®å¤

```bash
POST /api/v1/autofix
{
  "deployment": "my-app",
  "namespace": "default",
  "event": "Podå¯åŠ¨å¤±è´¥"
}
```

## ğŸ›  å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python app/main.py
```

### é¡¹ç›®ç»“æ„

```bash
python/
â”œâ”€â”€ app/                    # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±å’Œä¸­é—´ä»¶
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # å¤–éƒ¨æœåŠ¡é›†æˆ
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”œâ”€â”€ data/                  # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ deploy/                # éƒ¨ç½²é…ç½®
â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â””â”€â”€ docker-compose.yml     # Dockerç¼–æ’æ–‡ä»¶
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_rca.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app tests/
```

## ğŸ”§ é…ç½®è¯´æ˜

### ä¸»è¦é…ç½®é¡¹

| é…ç½®é¡¹                   | è¯´æ˜                | é»˜è®¤å€¼         |
| ------------------------ | ------------------- | -------------- |
| PROMETHEUS_HOST          | Prometheus æœåŠ¡åœ°å€ | 127.0.0.1:9090 |
| LLM_MODEL                | ä½¿ç”¨çš„ LLM æ¨¡å‹     | qwen2.5:3b     |
| RCA_ANOMALY_THRESHOLD    | å¼‚å¸¸æ£€æµ‹é˜ˆå€¼        | 0.65           |
| PREDICTION_MAX_INSTANCES | æœ€å¤§å®ä¾‹æ•°          | 20             |
| NOTIFICATION_ENABLED     | æ˜¯å¦å¯ç”¨é€šçŸ¥        | true           |

### LLM æ¨¡å‹é…ç½®

æ”¯æŒçš„æ¨¡å‹ï¼š

- Ollama æœ¬åœ°æ¨¡å‹ï¼ˆæ¨èï¼‰
- OpenAI GPT ç³»åˆ—
- å…¶ä»–å…¼å®¹ OpenAI API çš„æ¨¡å‹

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®è´Ÿè´£äºº**: Bamboo
- **é‚®ç®±**: [13664854532@163.com](mailto:13664854532@163.com)
- **é¡¹ç›®ä¸»é¡µ**: [https://github.com/GoSimplicity/AI-CloudOps]

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ LICENSE æ–‡ä»¶
